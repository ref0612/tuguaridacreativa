{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  products: [],\n  featuredProducts: [],\n  product: null,\n  loading: false,\n  error: null,\n  pages: 1,\n  page: 1\n};\n\n// Async thunks\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async ({\n  keyword = '',\n  pageNumber = 1\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(`/api/products?keyword=${keyword}&pageNumber=${pageNumber}`);\n    return {\n      products: data.products,\n      pages: data.pages,\n      page: data.page\n    };\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error al cargar los productos');\n  }\n});\nexport const fetchProductById = createAsyncThunk('products/fetchProductById', async (id, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(`/api/products/${id}`);\n    return data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Error al cargar el producto');\n  }\n});\nexport const fetchFeaturedProducts = createAsyncThunk('products/fetchFeaturedProducts', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get('/api/products/featured');\n    return data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Error al cargar los productos destacados');\n  }\n});\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    // Fetch Products\n    builder.addCase(fetchProducts.pending, state => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(fetchProducts.fulfilled, (state, action) => {\n      state.loading = false;\n      state.products = action.payload.products;\n      state.pages = action.payload.pages;\n      state.page = action.payload.page;\n    });\n    builder.addCase(fetchProducts.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n\n    // Fetch Product by ID\n    builder.addCase(fetchProductById.pending, state => {\n      state.loading = true;\n      state.error = null;\n      state.product = null;\n    });\n    builder.addCase(fetchProductById.fulfilled, (state, action) => {\n      state.loading = false;\n      state.product = action.payload;\n    });\n    builder.addCase(fetchProductById.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n\n    // Fetch Featured Products\n    builder.addCase(fetchFeaturedProducts.pending, state => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(fetchFeaturedProducts.fulfilled, (state, action) => {\n      state.loading = false;\n      state.featuredProducts = action.payload;\n    });\n    builder.addCase(fetchFeaturedProducts.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","products","featuredProducts","product","loading","error","pages","page","fetchProducts","keyword","pageNumber","rejectWithValue","data","get","_error$response","_error$response$data","response","message","fetchProductById","id","_error$response2","_error$response2$data","fetchFeaturedProducts","_","_error$response3","_error$response3$data","productsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","reducer"],"sources":["C:/Users/ferna/Desktop/ecommerce/frontend-ecommerce/src/store/slices/productsSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\ninterface Product {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  image: string;\n  category: string;\n  stock: number;\n  rating: number;\n  numReviews: number;\n}\n\ninterface ProductsState {\n  products: Product[];\n  featuredProducts: Product[];\n  product: Product | null;\n  loading: boolean;\n  error: string | null;\n  pages: number;\n  page: number;\n}\n\nconst initialState: ProductsState = {\n  products: [],\n  featuredProducts: [],\n  product: null,\n  loading: false,\n  error: null,\n  pages: 1,\n  page: 1,\n};\n\n// Async thunks\nexport const fetchProducts = createAsyncThunk<\n  { products: Product[]; pages: number; page: number },\n  { keyword?: string; pageNumber?: number },\n  { rejectValue: string }\n>('products/fetchProducts', async ({ keyword = '', pageNumber = 1 }, { rejectWithValue }) => {\n  try {\n    const { data } = await axios.get(\n      `/api/products?keyword=${keyword}&pageNumber=${pageNumber}`\n    );\n    return {\n      products: data.products,\n      pages: data.pages,\n      page: data.page,\n    };\n  } catch (error: any) {\n    return rejectWithValue(\n      error.response?.data?.message || 'Error al cargar los productos'\n    );\n  }\n});\n\nexport const fetchProductById = createAsyncThunk<\n  Product,\n  string,\n  { rejectValue: string }\n>('products/fetchProductById', async (id, { rejectWithValue }) => {\n  try {\n    const { data } = await axios.get(`/api/products/${id}`);\n    return data;\n  } catch (error: any) {\n    return rejectWithValue(\n      error.response?.data?.message || 'Error al cargar el producto'\n    );\n  }\n});\n\nexport const fetchFeaturedProducts = createAsyncThunk<\n  Product[],\n  void,\n  { rejectValue: string }\n>('products/fetchFeaturedProducts', async (_, { rejectWithValue }) => {\n  try {\n    const { data } = await axios.get('/api/products/featured');\n    return data;\n  } catch (error: any) {\n    return rejectWithValue(\n      error.response?.data?.message || 'Error al cargar los productos destacados'\n    );\n  }\n});\n\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    // Fetch Products\n    builder.addCase(fetchProducts.pending, (state) => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(\n      fetchProducts.fulfilled,\n      (state, action: PayloadAction<{ products: Product[]; pages: number; page: number }>) => {\n        state.loading = false;\n        state.products = action.payload.products;\n        state.pages = action.payload.pages;\n        state.page = action.payload.page;\n      }\n    );\n    builder.addCase(fetchProducts.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload as string;\n    });\n\n    // Fetch Product by ID\n    builder.addCase(fetchProductById.pending, (state) => {\n      state.loading = true;\n      state.error = null;\n      state.product = null;\n    });\n    builder.addCase(fetchProductById.fulfilled, (state, action: PayloadAction<Product>) => {\n      state.loading = false;\n      state.product = action.payload;\n    });\n    builder.addCase(fetchProductById.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload as string;\n    });\n\n    // Fetch Featured Products\n    builder.addCase(fetchFeaturedProducts.pending, (state) => {\n      state.loading = true;\n      state.error = null;\n    });\n    builder.addCase(fetchFeaturedProducts.fulfilled, (state, action: PayloadAction<Product[]>) => {\n      state.loading = false;\n      state.featuredProducts = action.payload;\n    });\n    builder.addCase(fetchFeaturedProducts.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload as string;\n    });\n  },\n});\n\nexport default productsSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}